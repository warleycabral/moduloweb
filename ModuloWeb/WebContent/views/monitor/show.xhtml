<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view locale="#{seg07Bean.idioma}"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	<ui:composition template="/views/layout/main.xhtml">
	<ui:define name="conteudo">
		<style> 
		    <!--
			.ui-inputfield { 
				 height: 18px; 
				}
		    -->
	    </style>
		<h:form id="formPrincipal">
			<div class="coluna_container_80"><br/></div>
			
			
			<div class="coluna_container_80"><br/></div>
			<p:messages id="message"></p:messages>
			
			<p:fieldset legend="#{lang.monitor_tituloPrincipal}">
				<div class="coluna_container_80">
					<p:poll interval="10" listener="#{monitorBean.listarNovasCorridas}" update="tableNovasCorridas" />  
					
					<p:dataTable emptyMessage="Nenhum dado a ser exibido!" id="tableNovasCorridas" paginatorPosition="bottom"
								var="corrida" value="#{monitorBean.listaNovasCorridas}" paginator="true" rows="5" 
								selectionMode="single" selection="#{monitorBean.corridaNovaTemp}" 
								dynamic="true" pageLinks="4" 
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15">
								<f:facet name="header">
				            		<div class="coluna_container_50">
										<div style="padding-top: 4px;padding-bottom: 4px;text-align: left;">
											<h:outputLabel styleClass="titulo"
												value="#{lang.monitor_subTituloCorridasNovas}" />
										</div>
									</div>
			        			</f:facet>
			        			<p:column sortBy="#{corrida.cidade}" style="width: 20%">
									<f:facet name="header">
										<h:outputText value="Cidade" />
									</f:facet>
									<h:outputText value="#{corrida.cidade}" />
								</p:column>
								
								<p:column sortBy="#{corrida.bairro}" style="width: 20%">
									<f:facet name="header">
										<h:outputText value="Bairro" />
									</f:facet>
									<h:outputText value="#{corrida.bairro}" />
								</p:column>
								
								<p:column sortBy="#{corrida.rua}" style="width: 35%"> 
									<f:facet name="header">
										<h:outputText value="Rua" />
									</f:facet>
									<h:outputText value="#{corrida.rua}" />
								</p:column>
								
								<p:column sortBy="#{corrida.horaSolicitacao}" style="width: 25%">
									<f:facet name="header">
										<h:outputText value="Hora Solicitação" />
									</f:facet>
									<h:outputText value="#{corrida.horaSolicitacao}" >
										 <f:convertDateTime  pattern="dd/MM/yyyy HH:mm" timeZone="GMT-03:00"></f:convertDateTime>
									</h:outputText>
								</p:column>
								
							</p:dataTable>
							
					<p:poll interval="10" listener="#{monitorBean.listarAndamentoCorridas}" update="tableAndamentoCorridas" />				
					<div class="coluna_container_80"><br/></div>
					<p:dataTable emptyMessage="Nenhum dado a ser exibido!" id="tableAndamentoCorridas" paginatorPosition="bottom"
								var="corrida" value="#{monitorBean.listaAndamentoCorridas}" paginator="true" rows="5" 
								selectionMode="single" selection="#{monitorBean.corridaAndamentoTemp}" 
								dynamic="true" pageLinks="4" 
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15">
								
								<f:facet name="header">
				            		<div class="coluna_container_50">
										<div style="padding-top: 4px;padding-bottom: 4px;text-align: left;">
											<h:outputLabel styleClass="titulo"
												value="#{lang.monitor_subTituloCorridasAndamento}" />
										</div>
									</div>
			        			</f:facet>
								
								<p:column sortBy="#{corrida.cidade}" style="width: 20%">
									<f:facet name="header">
										<h:outputText value="Cidade" />
									</f:facet>
									<h:outputText value="#{corrida.cidade}" />
								</p:column>
								
								<p:column sortBy="#{corrida.bairro}" style="width: 20%">
									<f:facet name="header">
										<h:outputText value="Bairro" />
									</f:facet>
									<h:outputText value="#{corrida.bairro}" />
								</p:column>
								
								<p:column sortBy="#{corrida.rua}" style="width: 35%"> 
									<f:facet name="header">
										<h:outputText value="Rua" />
									</f:facet>
									<h:outputText value="#{corrida.rua}" />
								</p:column>
								
								<p:column sortBy="#{corrida.horaInicio}" style="width: 25%">
									<f:facet name="header">
										<h:outputText value="Hora Inicio" />
									</f:facet>
									<h:outputText value="#{corrida.horaAtendimento}" >
										<f:convertDateTime  pattern="dd/MM/yyyy HH:mm" timeZone="GMT-03:00"></f:convertDateTime>
									</h:outputText>
								</p:column>
							</p:dataTable>
				</div>
			</p:fieldset>
		</h:form>
	</ui:define>
	</ui:composition>
</f:view>